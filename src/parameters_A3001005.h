/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № ________		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_A3001005_H
#define PARAMETERS_A3001005_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//#define addd_dTm1				0.0002
//#define addd_dTm2				0.0004
//#define addd_dTm3				0.0004

//**************************************************************************************************
const int	kodADC_t25[3]	= {1725, 1628, 1876};

const float	dTempC[3]	= {2.15, 2.3, 2.00};	// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений

			float	AUcc[3]	= {3.273, 3.280, 3.244};		// (В)  напряжение АЦП МУК1, МУК2, МУК3
const float	Uref[3]	= {3.026, 3.013, 3.020};		// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3 на PD0


// .............................................................................................................................
// *** М И Б *******************************************************************************************************************

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

const float kTempAE[3]	= {0.00010, 0.000100001, 0.00000001};	// Температурная коррекция АЭ

const float kTempAB[3]	= {0.00000001, 0.00000001, 0.00000001};		// Температурная коррекция АБ

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2					3				 4					5					6					7				 8				9					10		
const float	kAE_[2][72]	={{ 
					/* МУК1 */				2.418355,2.316066,2.418446,2.309565,2.411143,2.316044,2.411233,2.322857,2.396836,2.329370,
2.389808,2.329560,2.375686,2.342912,2.382776,2.336282,2.375675,2.349730,2.375775,2.336269,
2.361774,2.363469,2.361861,2.349892,2.348056,2.370409,2.361883,2.343061,2.354906,2.363457,
2.368803,2.356731,2.341236,2.384456,2.354993,2.356731,2.348046,2.370419,2.341343,2.356731,
2.327744,2.384413,2.348132,2.363632,2.327744,2.384399,2.341332,2.363622,2.334487,2.391463,
2.348154,2.370539,2.321062,2.405740,2.334551,2.384601,2.327744,2.377366,2.341322,2.363644,
2.307780,2.384399,2.341343,2.377545,2.321062,2.391463,2.341332,2.377567,2.321051,2.391452,
2.341332,2.277175},

	// ...................................................................................................
					
					/* МУК2 */			 {2.441529,2.244330,2.441515,2.256929,2.441525,2.250615,2.426771,2.256931,2.419477,2.269686,
2.397810,2.295606,2.390685,2.282577,2.390683,2.295605,2.390687,2.302190,2.383587,2.302184,
2.383599,2.302195,2.390677,2.295606,2.376545,2.302198,2.369530,2.295608,2.376547,2.302195,
2.376541,2.315449,2.362572,2.315459,2.362565,2.322140,2.383591,2.315462,2.355637,2.322140,
2.348759,2.328883,2.362565,2.328872,2.355647,2.328883,2.362565,2.322139,2.348761,2.328883,
2.355642,2.335638,2.348759,2.335650,2.362563,2.322140,2.355647,2.328883,2.355640,2.328867,
2.341919,2.328878,2.341912,2.335641,2.335113,2.335652,2.348754,2.328872,2.341917,2.349303,
2.348756,2.238047}};
//													 1		 2			3			 4			5			 6			7			 8			9			10
/* 													{ 
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
														}};
*/					
//														 1					 2					3					 4					5					6							7					 8					9						10
const float	dAE_[2][72]	={
													{0.028389,-0.040447,0.017755,-0.055074,0.029303,-0.036742,0.018701,-0.061031,0.033032,-0.035159,
0.029149,-0.064035,0.039493,-0.044799,0.028145,-0.063320,0.041393,-0.047781,0.029047,-0.061450,
0.046885,-0.050019,0.036500,-0.071273,0.048558,-0.053044,0.032723,-0.066347,0.045841,-0.048129,
0.031837,-0.070572,0.053131,-0.066775,0.035486,-0.070572,0.050435,-0.054939,0.039093,-0.070572,
0.056616,-0.059147,0.040111,-0.073648,0.056616,-0.057238,0.040965,-0.071758,0.052078,-0.060311,
0.036356,-0.071053,0.057414,-0.070360,0.045547,-0.086800,0.056616,-0.052282,0.042837,-0.075539,
0.064535,-0.057238,0.039093,-0.077953,0.057414,-0.060311,0.040965,-0.081757,0.059271,-0.058399,
0.040965,-0.073258},

					/* МУК2 */			{0.013170,-0.012083,-0.002935,-0.027129,0.009266,-0.014861,0.003001,-0.025325,0.019968,-0.019660,
0.014660,-0.046225,0.027568,-0.027163,0.023266,-0.048060,0.029479,-0.037659,0.020386,-0.047324,
0.034204,-0.033978,0.017532,-0.046225,0.031300,-0.030297,0.024150,-0.044389,0.033200,-0.032137,
0.025124,-0.053243,0.036878,-0.039821,0.026960,-0.054372,0.026581,-0.036118,0.025986,-0.054372,
0.038635,-0.040145,0.026960,-0.055508,0.039642,-0.042008,0.026960,-0.056229,0.040513,-0.042008,
0.031637,-0.058516,0.038635,-0.044977,0.025071,-0.054372,0.039642,-0.040145,0.029754,-0.061094,
0.045123,-0.045731,0.035291,-0.056650,0.045972,-0.043110,0.030652,-0.055508,0.043250,-0.052847,
0.032530,-0.049135}};
					// .................................................................................................
/*		  									{ 
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
												  0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
													}};
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.325, 4.325};						// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.363, 1.361},						// (В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};
float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float	KuAB1[3]	= {64.416370, 64.665375, 64.25182};
const float	DuAB1[3]	= { -0.358796, -0.576640, 0.165052};

const float	KuAB2[3]	= {64.632052, 64.593025, 64.331311};
const float	DuAB2[3]	= { -0.544690, -0.600392,  -0.186279};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.04;															 
const float	MaxUdatchD = 3.18;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]				  =	{{1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
														  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
	 													  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784}};

float a1[3][nDatchD]				  = {{0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732}};

float a2[3][nDatchD]				  =	{{0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002}};
																 
// ------------------------------- Тарировочные данные
float ItarD[nDatchD]	= {0.0019860,  0.0019876,  0.0019956, 0.0019972, 0.0019946};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]		= {{0.055902,0.055873,0.055589,0.055323,0.055395},
																 {0.055756,0.055886,0.055591,0.055410,0.055482},
																 {0.055904,0.055945,0.055635,0.055458,0.055378}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]		= {{-0.008639,-0.008665,-0.009136,-0.008767,-0.008995},
																 {-0.008659,-0.008740,-0.009285,-0.008984,-0.009424},
																 {-0.008828,-0.008833,-0.009334,-0.009044,-0.009253}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},


// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.0005;															 
const float	MaxUdatchT = 3.18;
	
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004149, 0.0041492, 0.004149, 0.004149, 0.004149};			// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																																	
float ItarT[nDatchT]	= {0.00398, 0.004000, 0.004010, 0.0039950, 0.004020};		// (A) Ток опроса датчиков ДД в БЭ
																
const float	kDT[3][nDatchD]		= {{0.048641,0.048619,0.048718,0.048733,0.048669},	
																 {0.048642,0.048484,0.048656,0.048697,0.048590},
																 {0.048553,0.048570,0.048674,0.048692,0.048661}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]		= {{0.370903,0.370966,0.370393,0.370241,0.370487},	// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
																 {0.369108,0.369510,0.368932,0.368651,0.369009},
																 {0.370071,0.370197,0.369655,0.369320,0.369526}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]	= {0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9}};											// Коэфф динамической дельты датч темпертуры

const float	kLimUadc[3][nDatchD]	= {{0.0025, 0.0030, 0.0015, 0.0020, 0.0020},
																	 	 {0.0015, 0.0023, 0.0015, 0.0015, 0.0010},
																		 {0.0020, 0.0025, 0.0015, 0.0015, 0.0010}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadcT[3][nDatchD]	= {{0.000005, 0.000005, 0.000005, 0.000005, 0.000005},
	                                   {0.000000, 0.000000, 0.000000, 0.000000, 0.000000},                      // Коэфф динамической дельты датч темпертуры для 1 уставки 
																		 {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}};																			 

//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки


#endif
