/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № 82741744		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_T3001001_H
#define PARAMETERS_T3001001_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//**************************************************************************************************
const int	kodADC_t25[3]	= {1816, 1780, 1660};		// Код датчика температуры МК при 25грд Цельсия

const float	dTempC[3]	= {13.00, 17, 18};				// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений
												 
			float	 AUcc[3]	= {3.249, 3.250, 3.266};	// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3
const float	 Uref[3]	= {3.01, 3.017, 3.0208};	// (В) Прецизионное напряжение АЦП МУК1, МУК2, МУК3 на PD0	!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

// .............................................................................................................................
// *** М И Б *******************************************************************************************************************
const float kTempAE[3]	= {0.0000000, 0.0000000, 0.0000000};	// Температурная коррекция для вычисления напряжения АЭ

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2				3				 4				5					6				7				 8				9				10		
const float	kAE_[2][72]	={{ /* МУК1 ------------------------------------------------------------------------------------*/
														2.405905,2.288391,2.363156,2.196573,2.403458,2.254007,2.359599,2.247477,2.374040,2.273825,
                            2.331238,2.287231,2.331238,2.300798,2.310411,2.287231,2.324254,2.287232,2.317312,2.321451,
                            2.345333,2.328417,2.338264,2.293996,2.345333,2.287231,2.296732,2.300798,2.331238,2.300799,
                            2.324254,2.328418,2.331238,2.273825,2.310411,2.307642,2.324254,2.307642,2.331238,2.293995,
                            2.289953,2.300799,2.310411,2.314526,2.331239,2.307642,2.310411,2.280510,2.317312,2.307642,
                            2.324255,2.356709,2.324255,2.293994,2.317312,2.307642,2.296732,2.321451,2.310411,2.293996,
                            2.283214,2.342480,2.310411,2.335428,2.310411,2.314526,2.296732,2.321452,2.296732,2.280509,2.310411,2.260576
													},
													{	/* МУК2 ------------------------------------------------------------------------------------*/
														2.429480,2.263645,2.351943,2.210614,2.375889,2.249093,2.368630,2.268839,2.368630,2.275498,
														2.361416,2.288935,2.347117,2.302531,2.354245,2.316291,2.305242,2.262219,2.340032,2.316291,
														2.340033,2.282197,2.340032,2.295711,2.347117,2.268838,2.340033,2.295713,2.354245,2.302531,
														2.347117,2.330213,2.347117,2.282197,2.325991,2.316290,2.340033,2.282197,2.305242,2.337239,
														2.325991,2.337239,2.312117,2.302530,2.312117,2.295714,2.340033,2.316290,2.332990,2.302530,
														2.332991,2.337239,2.305242,2.330214,2.319033,2.337240,2.332991,2.323230,2.305242,2.330213,
														2.319033,2.302531,2.325991,2.316290,2.305242,2.316288,2.312117,2.337240,2.305242,2.337239,2.332991,2.262218
													}};
//													 1		2				3		 4			5	 6				7		8				9	10				11	12
/* 													** Шаблон для расчёта коэффициентов **--------------------------------------------------------
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
*/					
//														 1					 2				3			   4					5				6					7			   8				9				10
const float	dAE_0[2][72]	={	/* МУК1 ------------------------------------------------------------------------------------*/
													{
														-0.020598, 0.000000,-0.027410, 0.038657,-0.027602, 0.018808,-0.023939, 0.020990,-0.026028, 0.023214,
														-0.011331,-0.016469, 0.0015,  -0.008547, 0.004569, 0.006285, 0.004605, 0.010456,-0.003300,-0.010248,
														-0.011457,-0.011751,-0.020024, 0.003479,-0.017043, 0.015905, 0.006168,-0.007351,-0.003377, 0.003027,
														-0.010072,-0.017655,-0.003377, 0.012382,-0.002073,-0.005987, 0.006760, 0.000000,-0.020586, 0.005301,
														 0.017346, 0.010334,-0.003907, 0.002314,-0.005228, 0.005693,-0.003907, 0.012694,-0.002753, 0.009357,
														-0.011917,-0.025595,-0.003987, 0.001307,-0.012500,-0.003819, 0.012155, 0.000000,-0.009410, 0.010764,
														 0.018192,-0.023061,-0.011245,-0.009856, 0.004024, 0.006536, 0.003815,-0.007934, 0.012155, 0.016854,-0.003907,-0.018085
													},
													{		/* МУК2 ------------------------------------------------------------------------------------*/
														-0.021961,0.006221,0.025459,0.034052,0.010085,0.008765,0.013182,0.010413,0.015551,0.006168,
														0.014312,-0.000171,0.017032,-0.012957,0.021046,-0.012124,0.043728,0.011968,0.023238,-0.006603,
														0.023718,0.003242,0.023238,-0.001308,0.017032,0.009077,0.019519,0.000516,0.015918,-0.005639,
														0.022145,-0.014505,0.017032,0.003242,0.029099,-0.002921,0.023718,0.003242,0.037759,-0.017563,
														0.022183,-0.020798,0.034890,0.001207,0.035364,-0.000837,0.019519,-0.008443,0.022949,-0.003809,
														0.022469,-0.010135,0.032738,-0.019581,0.032003,-0.021278,0.019241,-0.012834,0.035928,-0.014505,
														0.026951,-0.005639,0.018009,0.002600,0.032738,-0.007967,0.029378,-0.013850,0.030906,-0.015226,0.022469,-0.033434
													}};

const float	dAE_w[2][72]	={	/* МУК1 ------------------------------------------------------------------------------------*/
													{
														-0.030598,0.009992,-0.037410,0.083657,-0.052602,0.063808,-0.048939,0.065990,-0.051028,0.068214,
														-0.036331,0.049469,-0.024675,0.042547,-0.021569,0.051285,-0.021605,0.055456,-0.028300,0.035248,
														-0.036457,0.034751,-0.045024,0.048479,-0.042043,0.060905,-0.019168,0.038351,-0.028377,0.048027,
														-0.035072,0.028655,-0.028377,0.057382,-0.027073,0.040987,-0.019760,0.045196,-0.045586,0.050301,
														-0.008346,0.055334,-0.028907,0.047314,-0.030228,0.050693,-0.028907,0.057694,-0.012753,0.054357,
														-0.036917,0.020595,-0.028987,0.046307,-0.037500,0.042819,-0.013155,0.045012,-0.034410,0.055764,
														-0.007192,0.027061,-0.036245,0.020856,-0.021024,0.051536,-0.022815,0.038934,-0.013155,0.061854,-0.028907,0.027085
													},
													{		/* МУК2 ------------------------------------------------------------------------------------*/
														-0.021961,0.006221,0.025459,0.034052,0.010085,0.008765,0.013182,0.010413,0.015551,0.006168,
														0.014312,-0.000171,0.017032,-0.012957,0.021046,-0.012124,0.043728,0.011968,0.023238,-0.006603,
														0.023718,0.003242,0.023238,-0.001308,0.017032,0.009077,0.019519,0.000516,0.015918,-0.005639,
														0.022145,-0.014505,0.017032,0.003242,0.029099,-0.002921,0.023718,0.003242,0.037759,-0.017563,
														0.022183,-0.020798,0.034890,0.001207,0.035364,-0.000837,0.019519,-0.008443,0.022949,-0.003809,
														0.022469,-0.010135,0.032738,-0.019581,0.032003,-0.021278,0.019241,-0.012834,0.035928,-0.014505,
														0.026951,-0.005639,0.018009,0.002600,0.032738,-0.007967,0.029378,-0.013850,0.030906,-0.015226,0.022469,-0.033434
													}};
//													 1		2				3		 4			5	 6				7		8				9	10				11	12
/* 													** Шаблон для расчёта коэффициентов **--------------------------------------------------------		  									 
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.25, 4.25};							// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.385, 1.390},						// 1.3706, 1.3682(В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};


float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений датчиков напряжения АБ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float kTempAB[3]	= {0.0000000, 0.0000000, 0.0000000};		// Температурная коррекция для вычисления напряжения АБ

const float	KuAB1[3]	= {64.317678, 64.312764, 64.197367};
const float	DuAB1[3]	= {-0.169068, -0.085494, 0.009307};

const float	KuAB2[3]	= {64.317521, 64.079321, 64.314949};
const float	DuAB2[3]	= {-0.117645, 0.176091, -0.019952};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.1;															 
const float	MaxUdatchD = 3.0;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]	=	{{0.0663,	-0.0633, 0.0165, 0.0051, -0.0532},
											 	 {0.0663,	-0.0633, 0.0165, 0.0051, -0.0532},
	 										 	 {0.0663,	-0.0633, 0.0165, 0.0051, -0.0532}};

float a1[3][nDatchD]	= {{0.4549, 0.4512, 0.4425, 0.4479, 0.4547},
	 											 {0.4549, 0.4512, 0.4425, 0.4479, 0.4547},
	 										 	 {0.4549, 0.4512, 0.4425, 0.4479, 0.4547}};

float a2[3][nDatchD]	=	{{0.0001, 0.0001, 0.0002, 0.0002, 0.0001},
	 										 	 {0.0001, 0.0001, 0.0002, 0.0002, 0.0001},
	 										 	 {0.0001, 0.0001, 0.0002, 0.0002, 0.0001}};

// ------------------------------- Тарировочные данные
float ItarD[nDatchD]				= {0.0019823,  0.0019808,  0.001980, 0.0019811, 0.001986};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]	= {{0.051980,0.052033,0.052065,0.052023,0.052018},
															 {0.052001,0.052121,0.052056,0.052079,0.052040},
															 {0.052108,0.052066,0.052080,0.052109,0.052146}};
//														 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]	= {{-0.007163,-0.007328,-0.007327,-0.007226,-0.007249},
															 {-0.007127,-0.007419,-0.007180,-0.007201,-0.007265},
															 {-0.007132,-0.007317,-0.007066,-0.007092,-0.007479}};								 
//														 {0.0, 0.0, 0.0, 0.0, 0.0},


// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.001;															 
const float	MaxUdatchT = 3.18;
																 
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {100.03, 100.02, 100.08, 99.98, 100.05};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {141.464, 141.464, 141.464, 141.464, 141.464};					// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004129, 0.004131, 0.004119, 0.004134, 0.004118};					// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																
float ItarT[nDatchT]				= {0.0040018, 0.0040107, 0.0040047, 0.0040109, 0.0039933};			// (A) Ток опроса датчиков ДД в БЭ

const float	kDT[3][nDatchD]	= {{0.045231,0.045231,0.045185,0.045210,0.045177},	
															 {0.045217,0.045170,0.045198,0.045190,0.045159},
															 {0.045169,0.045179,0.045161,0.045160,0.045191}};
//														 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]	= {{0.378119,0.377953,0.378058,0.378114,0.378058},	// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
															 {0.378104,0.377968,0.378003,0.378066,0.378016},
															 {0.379509,0.379368,0.379395,0.379546,0.379413}};								 
//														 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]			= {0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
															 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
															 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},														// Предельное значение напряжения 1-й уставки,
																		{0.9, 0.9, 0.9, 0.9, 0.9},														// от которого производится коррекция напряжения
																		{0.9, 0.9, 0.9, 0.9, 0.9}};

const float	kLimUadc[3][nDatchD]	= {{0.0103, 0.0091, 0.0090, 0.0089, 0.0100},
																	 	 {0.0105, 0.0095, 0.0095, 0.0094, 0.0103},
																		 {0.0110, 0.0098, 0.0098, 0.0095, 0.0105}};						// Коэфф динамической дельты датч темпертуры

																		 
const float	kLimUadcT[3][nDatchD]	= {{0.000005, 0.000005, 0.000005, 0.000005, 0.000005},
	                                   {0.000005, 0.000005, 0.000005, 0.000005, 0.000005},  // Коэфф динамической дельты датч темпертуры МК для 1 уставки 
																		 {0.000002, 0.000005, 0.000005, 0.000005, 0.000005}};		
																		 
//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки																			

#endif
