/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № ________		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_E3001001_H
#define PARAMETERS_E3001001_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//#define addd_dTm1				0.0002
//#define addd_dTm2				0.0004
//#define addd_dTm3				0.0004

//**************************************************************************************************
const int	kodADC_t25[3]	= {1716, 1575, 1800};

const float	dTempC[3]	= {-2.00, 28.2, -12.5};	// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений

			float	AUcc[3]	= {3.269, 3.360, 3.266};		// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3
const float	Uref[3]	= {2.985, 3.031, 3.019};		// (В) Прецизионное напряжение АЦП МУК1, МУК2, МУК3 на PD0


// .............................................................................................................................
// *** М И Б *******************************************************************************************************************

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

const float kTempAE[3]	= {0.00010, 0.000100001, 0.00000001};	// Температурная коррекция АЭ

const float kTempAB[3]	= {0.00000001, 0.00000001, 0.00000001};		// Температурная коррекция АБ

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2					3				 4					5					6					7				 8				9					10		
const float	kAE_[2][72]	={{ 
					/* МУК1 */				2.484210,2.209466,2.469790,2.255418,2.424124,2.296348,2.451473,2.331613,2.427951,2.331612,
														2.412517,2.346025,2.397287,2.353294,2.389743,2.353295,2.404878,2.346023,2.397283,2.360612,
														2.389737,2.353294,2.374791,2.353295,2.374787,2.360611,2.374788,2.360612,2.374787,2.360612,
														2.360026,2.360612,2.367379,2.353297,2.367379,2.360616,2.374787,2.367977,2.360026,2.360616,
														2.360018,2.360612,2.352708,2.367979,2.374788,2.367977,2.374782,2.375388,2.367377,2.367977,
														2.338211,2.367979,2.360018,2.375386,2.352702,2.367979,2.352702,2.367979,2.338210,2.367979,
														2.360015,2.367979,2.360018,2.367979,2.360015,2.367979,2.352704,2.360616,2.352704,2.367979,2.360010,2.255381},

	// ...................................................................................................
					
					/* МУК2 */			 {2.464029,2.230003,2.456132,2.276266,2.409922,2.276296,2.402321,2.317536,2.409874,2.296753,
2.379962,2.331605,2.402344,2.303635,2.372617,2.338688,2.387410,2.324554,2.379974,2.331605,
2.379985,2.331617,2.365305,2.345834,2.379985,2.324566,2.365316,2.338697,2.372628,2.317568,
2.365305,2.331605,2.343671,2.317568,2.350816,2.345834,2.387388,2.338732,2.379962,2.317559,
2.350816,2.303668,2.343638,2.338720,2.358049,2.324588,2.343615,2.317568,2.350827,2.317580,
2.336481,2.331626,2.350816,2.324598,2.329391,2.353036,2.350816,2.317580,2.343605,2.324566,
2.329457,2.324588,2.322343,2.338732,2.343638,2.317580,2.336481,2.353036,2.365305,2.324588,
2.329391,2.249518}};
//													 1		 2			3			 4			5			 6			7			 8			9			10
/* 													{ 
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
														}};
*/					
//														 1					 2					3					 4					5					6							7					 8					9						10
const float	dAE_[2][72]	={
													{ -0.045149,0.029696,-0.037084,0.017651,-0.019293,-0.006614,-0.016707,-0.015536,-0.013758,-0.022072,
														-0.004426,-0.019929,0.002897,-0.031577,0.012734,-0.024980,-0.004124,-0.026505,0.003842,-0.028167,
														0.002198,-0.031577,0.017004,-0.024980,0.008440,-0.034784,0.015097,-0.028167,0.008440,-0.032888,
														0.023115,-0.028167,0.009632,-0.027797,0.014367,-0.026273,0.008440,-0.036111,0.023115,-0.026273,
														0.010815,-0.032888,0.022365,-0.029474,0.010347,-0.036111,0.009377,-0.032695,0.007731,-0.036111,
														0.024632,-0.029474,0.010815,-0.039353,0.016697,-0.029474,0.011992,-0.034210,0.022754,-0.029474,
														0.008921,-0.034210,0.015536,-0.029474,0.008921,-0.034210,0.018587,-0.026273,0.013881,-0.034210,0.007956,-0.018568},

					/* МУК2 */			{-0.031405,0.030108,-0.032492,0.002328,-0.001158,0.009974,-0.009871,-0.010280,-0.008737,0.004698,
-0.002348,-0.018251,-0.003691,-0.000100,0.002616,-0.025031,0.004430,-0.011015,-0.000477,-0.018251,
0.003774,-0.014087,0.005690,-0.028163,0.003774,-0.009187,0.007549,-0.023192,0.006854,-0.002496,
0.005690,-0.018251,0.022670,-0.002496,0.011780,-0.028163,0.000676,-0.015337,-0.002348,-0.006636,
0.014131,0.005333,0.014798,-0.019515,0.012956,-0.005532,0.011112,-0.004813,0.015979,-0.000674,
0.014123,-0.014584,0.014131,-0.003704,0.017115,-0.029465,0.014131,-0.000674,0.009269,-0.011512,
0.030434,-0.005532,0.020088,-0.017676,0.017141,-0.000674,0.014123,-0.029465,0.008055,-0.005532,0.017115,-0.019411}};
					// .................................................................................................
/*		  									{ 
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
												  0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
													}};
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.325, 4.325};						// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.363, 1.361},						// (В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};
float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float	KuAB1[3]	= {64.25182, 64.25182, 64.25182};
const float	DuAB1[3]	= {-0.169068, -0.085494, 0.009307};

const float	KuAB2[3]	= {64.25182, 64.25182, 64.25182};
const float	DuAB2[3]	= {-0.117645, 0.176091, -0.019952};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.1;															 
const float	MaxUdatchD = 3.18;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]				  =	{{1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
														  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
	 													  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784}};

float a1[3][nDatchD]				  = {{0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732}};

float a2[3][nDatchD]				  =	{{0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002}};
																 
// ------------------------------- Тарировочные данные
float ItarD[nDatchD]	= {0.001982,  0.001974,  0.001984, 0.001982, 0.001978};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]		= {{0.050774,0.050853,0.050872,0.050845,0.050843},
																 {0.050708,0.050996,0.050972,0.050793,0.050956},
																 {0.050867,0.050929,0.050881,0.050884,0.050957}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]		= {{-0.006872,-0.006770,-0.006718,-0.006844,-0.006408},
																 {-0.006797,-0.006838,-0.006729,-0.006765,-0.006807},
																 {-0.006719,-0.006413,-0.006245,-0.006712,-0.006598}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},


// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.04;															 
const float	MaxUdatchT = 3.18;
	
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004149, 0.004149, 0.004149, 0.004149, 0.004149};			// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																																	
float ItarT[nDatchT]	= {0.00398, 0.004000, 0.0039900, 0.0039950, 0.004000};		// (A) Ток опроса датчиков ДД в БЭ
																
const float	kDT[3][nDatchD]		= {{0.044059,0.044021,0.044133,0.044093,0.044105},	
																 {0.044116,0.044061,0.044076,0.044040,0.044200},
																 {0.044084,0.044027,0.044138,0.044119,0.044054}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]		= {{0.367949,0.368063,0.367855,0.367705,0.367825},	// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
																 {0.373190,0.373107,0.373116,0.373169,0.372869},
																 {0.372041,0.371986,0.371712,0.371774,0.371848}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]	= {0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9}};											// Коэфф динамической дельты датч темпертуры

const float	kLimUadc[3][nDatchD]	= {{0.0015, 0.0009, 0.0006, 0.0006, 0.0008},
																	 	 {0.0075, 0.0050, 0.0055, 0.0057, 0.0045},
																		 {0.0065, 0.0045, 0.0043, 0.0045, 0.0045}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadcT[3][nDatchD]	= {{0.000005, 0.000005, 0.000005, 0.000005, 0.000005},
	                                   {0.000000, 0.000000, 0.000000, 0.000000, 0.000000},                      // Коэфф динамической дельты датч темпертуры для 1 уставки 
																		 {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}};																			 

//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки


#endif
