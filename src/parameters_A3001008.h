/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № ________		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_A3001008_H
#define PARAMETERS_A3001008_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//#define addd_dTm1				0.0002
//#define addd_dTm2				0.0004
//#define addd_dTm3				0.0004

//**************************************************************************************************
const int	kodADC_t25[3]	= {1744, 1766, 1811};

const float	dTempC[3]	= {0.00, 0.40, 1.40};	// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений

			float	AUcc[3]	= {3.280, 3.255, 3.247};		// (В)  напряжение АЦП МУК1, МУК2, МУК3 (С 19)
const float	Uref[3]	= {3.0197, 3.0246, 3.0258};		// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3 на PD0 (С 13)


// .............................................................................................................................
// *** М И Б *******************************************************************************************************************

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

const float kTempAE[3]	= {0.00010, 0.000100001, 0.00000001};	// Температурная коррекция АЭ

const float kTempAB[3]	= {0.00000001, 0.00000001, 0.00000001};		// Температурная коррекция АБ

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2					3				 4					5					6					7				 8				9					10		
const float	kAE_[2][72]	={{ 
													  2.452344,2.254815,2.444893,2.261151,2.437487,2.261151,2.444893,2.273929,2.422809,2.286855,
2.408307,2.293372,2.393978,2.299927,2.408307,2.306519,2.401121,2.306519,2.386876,2.319818,
2.386877,2.319819,2.372800,2.326525,2.372800,2.313150,2.365823,2.333271,2.379817,2.319818,
2.379817,2.333271,2.365824,2.319819,2.365823,2.319819,2.379817,2.326527,2.351994,2.326526,
2.345139,2.326526,2.358888,2.333273,2.351994,2.319818,2.345139,2.333272,2.351994,2.333272,
2.351994,2.346882,2.345139,2.333272,2.345139,2.340057,2.351994,2.340057,2.351994,2.340057,
2.351994,2.326526,2.331549,2.346883,2.345139,2.340058,2.338324,2.340057,2.345139,2.333273,
2.351994,2.242249},

	// ...................................................................................................
					
					/* МУК2 */			 {2.509563,2.215309,2.456355,2.258500,2.441567,2.277517,2.405361,2.316555,2.412516,2.316555,
2.377159,2.329867,2.377159,2.323188,2.384149,2.343329,2.377162,2.336571,2.363304,2.336582,
2.370211,2.336578,2.363307,2.336578,2.363304,2.343326,2.349611,2.356944,2.363309,2.336573,
2.356440,2.350120,2.349611,2.343326,2.356438,2.350121,2.370211,2.343328,2.336072,2.343333,
2.336072,2.350121,2.349609,2.350122,2.349611,2.350117,2.342824,2.350121,2.349611,2.350120,
2.349609,2.336587,2.342821,2.350121,2.342822,2.336582,2.349611,2.350120,2.336072,2.336584,
2.342821,2.350120,2.329363,2.350126,2.336072,2.350121,2.336072,2.350126,2.342822,2.350120,
2.336067,2.245974}};
//													 1		 2			3			 4			5			 6			7			 8			9			10
/* 													{ 
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
														}};
*/					
//														 1					 2					3					 4					5					6							7					 8					9						10
const float	dAE_[2][72]	={
					/* МУК1 */	  { 0.034051,-0.050210,0.030093,-0.057616,0.037834,-0.051298,0.032047,-0.065297,0.043507,-0.061193,
													0.044308,-0.070569,0.050826,-0.067145,0.044308,-0.076592,0.051891,-0.073833,0.054541,-0.082684,
													0.055489,-0.076202,0.058103,-0.087615,0.057149,-0.069469,0.057033,-0.088847,0.056322,-0.074348,
													0.055377,-0.088847,0.061753,-0.076202,0.057033,-0.077123,0.058223,-0.081115,0.060549,-0.082039,
													0.066034,-0.073678,0.061623,-0.085119,0.069000,-0.074348,0.065102,-0.083254,0.069000,-0.082327,
													0.066187,-0.093206,0.067908,-0.082327,0.065102,-0.088216,0.063362,-0.079807,0.064308,-0.091955,
													0.063362,-0.077397,0.070404,-0.087581,0.066034,-0.081677,0.067761,-0.088216,0.066034,-0.076734,
													0.062428,-0.075818},

					/* МУК2 */			{-0.040874,0.008966,-0.020685,-0.005063,-0.010284,-0.020107,0.001996,-0.034057,0.001499,-0.031741,
														0.011579,-0.036191,0.013956,-0.036479,0.010621,-0.043920,0.017722,-0.046038,0.017223,-0.037268,
														0.016779,-0.038634,0.019095,-0.040970,0.019586,-0.045290,0.022801,-0.053605,0.023330,-0.042335,
														0.021887,-0.046887,0.025151,-0.045290,0.020020,-0.045025,0.016779,-0.043433,0.024613,-0.040207,
														0.026949,-0.042675,0.020939,-0.043163,0.025151,-0.046399,0.025566,-0.045025,0.025151,-0.044537,
														0.020939,-0.031714,0.024196,-0.042675,0.023710,-0.037268,0.025151,-0.044537,0.024613,-0.033565,
														0.024196,-0.044537,0.027357,-0.039439,0.026949,-0.042675,0.024613,-0.039439,0.026052,-0.044537,
														0.019061,-0.017402}};
					// .................................................................................................
/*		  									{ 
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
												  0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
													}};
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.325, 4.325};						// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.363, 1.361},						// (В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};
float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float	KuAB1[3]	= {64.400571, 64.400571, 64.400571};
const float	DuAB1[3]	= {-0.229119, -0.229119, -0.229119};

const float	KuAB2[3]	= {64.400571, 64.400571, 64.400571};
const float	DuAB2[3]	= {-0.229119, -0.229119, -0.229119};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.04;	// Диапазон измерения ДД 													 
const float	MaxUdatchD = 3.18;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]				  =	{{1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
														  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
	 													  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784}};

float a1[3][nDatchD]				  = {{0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732}};

float a2[3][nDatchD]				  =	{{0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002}};
																 
// ------------------------------- Тарировочные данные
float ItarD[nDatchD]	= {0.0019929,  0.0019975,  0.0019891, 0.0019899, 0.0019841};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]		= {{0.055992,0.056009,0.055601,0.055539,0.055452},
																 {0.055916,0.055937,0.055516,0.055477,0.055306},
																 {0.056040,0.056045,0.055448,0.055498,0.055400}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]		= {{-0.008951,-0.008867,-0.008940,-0.009131,-0.008998},
																 {-0.008956,-0.008839,-0.008971,-0.009171,-0.008972},
																 {-0.008878,-0.008806,-0.008609,-0.009023,-0.008953}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},


// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.0005;  //	Диапазон измерения ДТ														 
const float	MaxUdatchT = 3.18;
	
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004149, 0.004149, 0.004149, 0.004149, 0.004149};			// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																																	
float ItarT[nDatchT]	= {0.0040105, 0.0040152, 0.0039893, 0.0039910, 0.0040059};		// (A) Ток опроса датчиков ДТ в БЭ
																
const float	kDT[3][nDatchD]		= {{0.048573,0.048568,0.048550,0.048750,0.048764},	
																 {0.048643,0.048610,0.048658,0.048629,0.048711},
																 {0.048639,0.048503,0.048757,0.048703,0.048636}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]		= {{0.369224,0.369043,0.369096,0.368938,0.368604},	// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
																 {0.369984,0.369774,0.369697,0.369947,0.369544},
																 {0.370064,0.370011,0.369575,0.369845,0.369651}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]	= {0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9}};											// Коэфф динамической дельты датч темпертуры

const float	kLimUadc[3][nDatchD]	= {{0.0015, 0.0010, 0.0022, 0.0017, 0.0015},
																	 	 {0.0012, 0.0010, 0.0025, 0.0025, 0.0020},
																		 {0.0008, 0.0013, 0.0022, 0.0015, 0.0012}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadcT[3][nDatchD]	= {{0.000000, 0.000000, 0.000000, 0.000000, 0.000000},
	                                   {0.000000, 0.000000, 0.000000, 0.000000, 0.000000},                      // Коэфф динамической дельты датч темпертуры для 1 уставки 
																		 {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}};																			 

//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки


#endif
