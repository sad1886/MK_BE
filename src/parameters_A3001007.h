/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № ________		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_A3001007_H
#define PARAMETERS_A3001007_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//#define addd_dTm1				0.0002
//#define addd_dTm2				0.0004
//#define addd_dTm3				0.0004

//**************************************************************************************************
const int	kodADC_t25[3]	= {1668, 1694, 1688};

const float	dTempC[3]	= {-0.00, 2.2, -0.8};	// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений

			float	AUcc[3]	= {3.2789, 3.3632, 3.2647};		// (В)  Напряжение АЦП МУК1, МУК2, МУК3
const float	Uref[3]	= {3.0116, 3.0216, 3.0147};		// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3 на PD0


// .............................................................................................................................
// *** М И Б *******************************************************************************************************************

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

const float kTempAE[3]	= {0.00010, 0.000100001, 0.00000001};	// Температурная коррекция АЭ

const float kTempAB[3]	= {0.00000001, 0.00000001, 0.00000001};		// Температурная коррекция АБ

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2					3				 4					5					6					7				 8				9					10		
const float	kAE_[2][72]	={{ 
					/* МУК1 */				2.412813,2.253877,2.420075,2.260211,2.420075,2.260213,2.412813,2.272992,2.405594,2.279434,
2.384195,2.279435,2.377147,2.279434,2.370140,2.292432,2.377147,2.285914,2.363173,2.312210,
2.363174,2.318877,2.356249,2.318877,2.356249,2.298987,2.356249,2.312208,2.370140,2.305579,
2.349364,2.312208,2.342520,2.305579,2.356249,2.318878,2.349364,2.312209,2.342520,2.318878,
2.342520,2.332330,2.342520,2.325584,2.349364,2.325583,2.349364,2.325584,2.335715,2.325584,
2.342520,2.332329,2.335715,2.332329,2.335715,2.339115,2.342520,2.332330,2.342520,2.325585,
2.328950,2.332329,2.342520,2.339114,2.328949,2.332330,2.328949,2.332330,2.328950,2.339115,
2.342520,2.235080},

	// ...................................................................................................
					
					/* МУК2 */			 {2.455406,2.278849,2.433234,2.291771,2.425933,2.291771,2.397159,2.331426,2.404289,2.318055,
2.376023,2.338169,2.376023,2.358634,2.362139,2.351773,2.369061,2.338168,2.362139,2.358634,
2.362139,2.351773,2.348415,2.351771,2.348415,2.344950,2.341613,2.351771,2.355257,2.344950,
2.355257,2.344950,2.348415,2.351771,2.341613,2.358633,2.355257,2.351771,2.334850,2.365534,
2.334850,2.365534,2.328126,2.379460,2.328126,2.372476,2.321440,2.365534,2.341613,2.358633,
2.334850,2.379459,2.321440,2.358633,2.321440,2.351771,2.328126,2.365534,2.328126,2.358633,
2.321440,2.365534,2.328126,2.365534,2.328126,2.372476,2.321440,2.384673,2.321440,2.358633,
2.334850,2.272443}};
//													 1		 2			3			 4			5			 6			7			 8			9			10
/* 													{ 
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
														}};
*/					
//														 1					 2					3					 4					5					6							7					 8					9						10
const float	dAE_[2][72]	={
													{ 0.024076,-0.020450,0.016363,-0.024163,0.021199,-0.026878,0.019255,-0.029841,0.026936,-0.029971,
0.030650,-0.030881,0.032503,-0.028149,0.036246,-0.034812,0.036305,-0.032843,0.039020,-0.043567,
0.041852,-0.047448,0.041778,-0.053936,0.042718,-0.036797,0.039893,-0.047264,0.035296,-0.037868,
0.046397,-0.045415,0.046305,-0.039712,0.039893,-0.046519,0.043577,-0.040795,0.043498,-0.048373,
0.038812,-0.045948,0.041624,-0.043908,0.039820,-0.042980,0.037004,-0.045768,0.047150,-0.044840,
0.045371,-0.048743,0.047150,-0.049678,0.046218,-0.059219,0.044432,-0.045948,0.041624,-0.049488,
0.051714,-0.053408,0.041624,-0.049865,0.047990,-0.045948,0.048923,-0.052474,0.046127,-0.048933,
0.043498,-0.039809},

					/* МУК2 */			{-0.002045,-0.031189,-0.003351,-0.031923,0.005884,-0.033277,0.013134,-0.049433,0.012663,-0.039367,
0.019769,-0.052410,0.022145,-0.066592,0.027260,-0.058417,0.024952,-0.048212,0.027260,-0.065199,
0.029622,-0.056065,0.029059,-0.054675,0.031407,-0.049329,0.031813,-0.056546,0.028644,-0.049329,
0.026289,-0.049809,0.031407,-0.054194,0.029951,-0.053942,0.032390,-0.054194,0.032695,-0.062612,
0.035030,-0.060246,0.039126,-0.070643,0.037751,-0.059525,0.039982,-0.058849,0.034155,-0.057212,
0.030838,-0.059287,0.038610,-0.051584,0.039982,-0.052805,0.037751,-0.054602,0.033571,-0.052066,
0.038610,-0.058365,0.037275,-0.058849,0.039603,-0.061412,0.036289,-0.066766,0.042303,-0.051584,
0.032695,-0.052308}};
					// .................................................................................................
/*		  									{ 
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
												  0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
													}};
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.325, 4.325};						// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.363, 1.361},						// (В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};
float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float	KuAB1[3]	= {64.450897, 64.450897, 64.450897};
const float	DuAB1[3]	= {-0.349276, -0.349276, -0.349276};

const float	KuAB2[3]	= {64.450897, 64.25182, 64.25182};
const float	DuAB2[3]	= {-0.349276, 0.176091, -0.019952};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.04;															 
const float	MaxUdatchD = 3.18;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]				  =	{{1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
														  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
	 													  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784}};

float a1[3][nDatchD]				  = {{0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732}};

float a2[3][nDatchD]				  =	{{0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002}};
																 
// ------------------------------- Тарировочные данные
float ItarD[nDatchD]	= {0.0019949,  0.0019975,  0.0019986, 0.001998, 0.001990};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]		= {{0.055592,0.055809,0.055644,0.055432,0.055388},
																 {0.055629,0.055779,0.055540,0.055487,0.055386},
																 {0.055699,0.055847,0.055523,0.055555,0.055454}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]		= {{-0.008039,-0.008583,-0.009360,-0.009069,-0.009175},
																 {-0.008114,-0.008613,-0.009124,-0.009078,-0.009136},
																 {-0.008118,-0.008614,-0.009059,-0.009080,-0.009095}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},


// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.001;															 
const float	MaxUdatchT = 3.18;
	
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004149, 0.004149, 0.004149, 0.004149, 0.004149};			// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																																	
float ItarT[nDatchT]	= {0.0039935, 0.003983, 0.0039804, 0.003993, 0.004009};		// (A) Ток опроса датчиков ДТ в БЭ
																
const float	kDT[3][nDatchD]		= {{0.048688,0.048681,0.048742,0.048806,0.048648},	
																 {0.048578,0.048578,0.048624,0.048691,0.048671},
																 {0.048605,0.048673,0.048673,0.048695,0.048628}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]		= {{0.368080,0.368167,0.367935,0.368407,0.368246},	// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
																 {0.369924,0.369906,0.369769,0.370161,0.369723},
																 {0.368866,0.368808,0.368758,0.369087,0.368781}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]	= {0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9}};											// Коэфф динамической дельты датч темпертуры

const float	kLimUadc[3][nDatchD]	= {{0.0015, 0.0020, 0.0018, 0.0016, 0.0008},
																	 	 {0.0020, 0.0022, 0.0025, 0.0020, 0.0015},
																		 {0.0015, 0.0020, 0.0019, 0.0013, 0.0010}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadcT[3][nDatchD]	= {{0.000005, 0.000005, 0.000005, 0.000005, 0.000005},
	                                   {0.000000, 0.000000, 0.000000, 0.000000, 0.000000},                      // Коэфф динамической дельты датч темпертуры для 1 уставки 
																		 {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}};																			 

//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки


#endif
