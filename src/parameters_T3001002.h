/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № 82741745		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_T3001002_H
#define PARAMETERS_T3001002_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//**************************************************************************************************
const int	kodADC_t25[3]	= {1840, 1750, 1660};

const float	dTempC[3]	= {10.00, 10.2, 5};				// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений
												 
			float	 AUcc[3] = {3.265, 3.249, 3.266};		// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3
const float	 Uref[3] = {3.0227, 3.0143, 3.018};	// (В) Прецизионное напряжение АЦП МУК1, МУК2, МУК3 на PD0		!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


// .............................................................................................................................
// *** М И Б *******************************************************************************************************************

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

const float kTempAE[3]	= {0.000, 0.000, 0.00000001};	// Температурная коррекция АЭ

const float kTempAB[3]	= {0.0000000, 0.0000000, 0.0000000};		// Температурная коррекция АБ

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2				3				 4				5					6				7				 8				9				10		
const float	kAE_[2][72]	={{ /* МУК1 ------------------------------------------------------------------------------------*/
														2.348881,2.222279,2.340497,2.199731,2.352327,2.291007,2.366732,2.297817,2.352327,2.284236,
														2.352327,2.291007,2.296420,2.304668,2.345190,2.368215,2.324037,2.304668,2.331046,2.318494,
														2.324037,2.325468,2.345190,2.304667,2.317071,2.291007,2.331046,2.257551,2.338097,2.304668,
														2.338097,2.304668,2.310146,2.291007,2.317071,2.339544,2.345190,2.325469,2.324037,2.346648,
														2.317071,2.325468,2.303262,2.339545,2.310146,2.311559,2.331046,2.325468,2.317071,2.304668,
														2.324037,2.325468,2.276134,2.360983,2.289618,2.325469,2.296420,2.339545,2.310146,2.325469,
														2.303262,2.318493,2.317071,2.339544,2.324037,2.291007,2.303262,2.332486,2.296420,2.318493,2.303262,2.284237
													},
													{	/* МУК2 ------------------------------------------------------------------------------------*/
														2.353621,2.181615,2.366533,2.238192,2.359347,2.297766,2.352201,2.251168,2.345100,2.264288,
														2.345100,2.270908,2.366530,2.284263,2.345096,2.311452,2.317123,2.304590,2.324050,2.318348,
														2.324056,2.297780,2.317116,2.284263,2.324045,2.291000,2.331017,2.304594,2.338043,2.304590,
														2.324050,2.304597,2.331021,2.270907,2.331019,2.304597,2.317119,2.264291,2.303370,2.304597,
														2.324041,2.304597,2.331017,2.297782,2.324047,2.311452,2.345092,2.284268,2.345096,2.304599,
														2.296568,2.339298,2.352190,2.277572,2.317114,2.264292,2.303376,2.325290,2.331017,2.291007,
														2.331016,2.297780,2.296563,2.318358,2.324043,2.311459,2.331016,2.311456,2.310219,2.311459,2.324045,2.244617
													}};
//													 1		2				3		 4			5	 6				7		8				9	10				11	12
/* 													** Шаблон для расчёта коэффициентов **--------------------------------------------------------
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
*/					
//														 1				 2				3					 4				5					6			  7					 8				9				 10
const float	dAE_0[2][72]	={	/* МУК1 ------------------------------------------------------------------------------------*/
													{
														0.079651, 0.004928,0.068895, 0.002266,0.081395,-0.047611,0.055590,-0.055168,0.075772,-0.043681,		//0.059651
														0.043396,-0.070275,0.100043,-0.050005,0.058197,-0.100094,0.085275,-0.056332,0.072140,-0.082635,
														0.075275,-0.061798,0.054459,-0.088254,0.098077,-0.050308,0.070283,-0.038827,0.074031,-0.052659,
														0.051106,-0.080091,0.090862,-0.050308,0.051576,-0.095831,0.063030,-0.043652,0.071316,-0.102777,
														0.068845,-0.058092,0.083557,-0.101425,0.087180,-0.052002,0.058425,-0.085772,0.092538,-0.048986,
														0.053168,-0.092065,0.100914,-0.084929,0.079164,-0.083919,0.096383,-0.049848,0.048887,-0.087625,
														0.076289,-0.056886,0.062343,-0.092102,0.087867,-0.043005,0.078050,-0.068928,0.100893,-0.056886,0.063557,-0.101841
													},
													{		/* МУК2 ------------------------------------------------------------------------------------*/
														0.013846,0.055656,0.003684,0.030703,0.010939,-0.005552,0.009718,0.026868,0.015053,0.019870,
														0.012708,0.014734,0.002300,0.011224,0.008991,-0.004689,0.032314,-0.001230,0.021570,-0.009525,
														0.029419,0.007195,0.022652,0.008939,0.018368,0.008307,0.011244,-0.001709,0.019870,-0.001230,
														0.021570,0.001945,0.017270,0.015205,0.013092,0.001945,0.028642,0.023459,0.024798,0.001945,
														0.014685,0.004249,0.011244,0.006718,0.020210,-0.002378,0.005274,0.012559,0.011336,0.006075,
														0.034961,-0.014938,0.000886,0.019537,0.020816,0.022990,0.032577,-0.008379,0.011244,0.013279,
														0.011728,0.007195,0.031321,-0.000339,0.016527,0.004949,0.009397,0.000807,0.022377,0.004949,0.016044,-0.016569
													}};
const float	dAE_w[2][72]	={	/* МУК1 ------------------------------------------------------------------------------------*/
													{
														0.089651,-0.004928,0.083895,0.007266,0.061395,-0.017611,0.025590,-0.035168,0.055772,-0.003681,
														0.033396,-0.030275,0.080043,-0.020005,0.038197,-0.080094,0.065275,-0.016332,0.042140,-0.042635,
														0.065275,-0.050798,0.034459,-0.038254,0.068077,-0.010308,0.040283,-0.018827,0.054031,-0.012659,
														0.041106,-0.040091,0.070862,-0.010308,0.051576,-0.055831,0.053030,-0.023652,0.041316,-0.062777,
														0.058845,-0.018092,0.053557,-0.061425,0.067180,-0.012002,0.038425,-0.045772,0.062538,-0.008986,
														0.043168,-0.042065,0.080914,-0.044929,0.059164,-0.043919,0.076383,-0.029848,0.048887,-0.047625,
														0.066289,-0.016886,0.042343,-0.070102,0.057867,-0.003005,0.048050,-0.048928,0.070893,-0.016886,0.053557,-0.081841
													},
													{		/* МУК2 ------------------------------------------------------------------------------------*/
														0.013846,0.055656,0.003684,0.030703,0.010939,-0.005552,0.009718,0.026868,0.015053,0.019870,
														0.012708,0.014734,0.002300,0.011224,0.008991,-0.004689,0.032314,-0.001230,0.021570,-0.009525,
														0.029419,0.007195,0.022652,0.008939,0.018368,0.008307,0.011244,-0.001709,0.019870,-0.001230,
														0.021570,0.001945,0.017270,0.015205,0.013092,0.001945,0.028642,0.023459,0.024798,0.001945,
														0.014685,0.004249,0.011244,0.006718,0.020210,-0.002378,0.005274,0.012559,0.011336,0.006075,
														0.034961,-0.014938,0.000886,0.019537,0.020816,0.022990,0.032577,-0.008379,0.011244,0.013279,
														0.011728,0.007195,0.031321,-0.000339,0.016527,0.004949,0.009397,0.000807,0.022377,0.004949,0.016044,-0.016569
													}};
//													 1		2				3		 4			5	 6				7		8				9	10				11	12
/* 													** Шаблон для расчёта коэффициентов **--------------------------------------------------------		  									 
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
														0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.325, 4.325};						// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.35324192, 1.35717583},	// (В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};
float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений АБ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float	KuAB1[3]	= {64.317678, 64.312764, 64.197367};
const float	DuAB1[3]	= {-0.169068, -0.085494, 0.009307};

const float	KuAB2[3]	= {64.317521, 64.079321, 64.314949};
const float	DuAB2[3]	= {-0.117645, 0.176091, -0.019952};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.15;															 
const float	MaxUdatchD = 3.0;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]	=	{{0.0474,	0.0532, 0.1043, -0.0135, 0.1074},
											 	 {0.0474,	0.0532, 0.1043, -0.0135, 0.1074},
	 										 	 {0.0474,	0.0532, 0.1043, -0.0135, 0.1074}};

float a1[3][nDatchD]	= {{0.4401, 0.4630, 0.4478, 0.4547, 0.4455},
	 										 	 {0.4401, 0.4630, 0.4478, 0.4547, 0.4455},
	 										 	 {0.4401, 0.4630, 0.4478, 0.4547, 0.4455}};

float a2[3][nDatchD]	=	{{0.0002, 0.0000, 0.0001, 0.0001, 0.0002},
	 										 	 {0.0002, 0.0000, 0.0001, 0.0001, 0.0002},
	 										 	 {0.0002, 0.0000, 0.0001, 0.0001, 0.0002}};
																 
// ------------------------------- Тарировочные данные
float ItarD[nDatchD]				= {0.0019976,  0.0019866,  0.001991, 0.0019967, 0.0019975};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]	= {{0.052009,0.051981,0.052052,0.052111,0.052196},
															 {0.052007,0.051981,0.051893,0.051974,0.052109},
															 {0.051907,0.051962,0.051941,0.052057,0.052014}};
//														 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]	= {{-0.007797,-0.007789,-0.007424,-0.007510,-0.007863},
															 {-0.007779,-0.007791,-0.007072,-0.007422,-0.007808},
															 {-0.007666,-0.007719,-0.006987,-0.007331,-0.007369}};								 
//														 {0.0, 0.0, 0.0, 0.0, 0.0},

															 
// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.001;															 
const float	MaxUdatchT = 3.18;
															 
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {100.15, 100.01, 100.10, 100.06, 100.03};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004132, 0.004119, 0.004127, 0.004107, 0.004132};			// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																																	
float ItarT[nDatchT]				= {0.0040018, 0.0039832, 0.0039901, 0.0040012, 0.0040077};	// (A) Ток опроса датчиков ДД в БЭ

const float	kDT[3][nDatchD]	= {{0.045146,0.045264,0.045083,0.045287,0.045156},		//
															 {0.044999,0.045118,0.045124,0.045061,0.045277},
															 {0.045110,0.045170,0.045156,0.045132,0.045091}};
//														 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]	= {{0.380183,0.379477,0.380048,0.379505,0.379992},		// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
															 {0.379389,0.378926,0.378961,0.379192,0.378575},
															 {0.379705,0.379283,0.379184,0.379336,0.379447}};								 
//														 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]			= {0.00000001, 0.00000001, 0.00000001, 0.00000051, 0.00000050,
															 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000101,
															 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9}};											// Коэфф динамической дельты датч темпертуры

const float	kLimUadc[3][nDatchD]	= {{0.0118, 0.0119, 0.0115, 0.010, 0.0098},
																	 	 {0.0105, 0.011, 0.0098, 0.0098, 0.0080},
																		 {0.0105, 0.011, 0.00950, 0.0093, 0.0087}};			// Коэфф динамической дельты датч темпертуры

const float	kLimUadcT[3][nDatchD]	= {{0.000005, 0.000005, 0.000005, 0.000005, 0.000005},
	                                   {0.000005, 0.000005, 0.000005, 0.000005, 0.000005},                      // Коэфф динамической дельты датч темпертуры для 1 уставки 
																		 {0.0, 0.000005, 0.000005, 0.000005, 0.000005}};																			 
																		 

//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 2.5},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки


#endif
