/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № ________		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_A3001002_H
#define PARAMETERS_A3001002_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//#define addd_dTm1				0.0002
//#define addd_dTm2				0.0004
//#define addd_dTm3				0.0004

//**************************************************************************************************
const int	kodADC_t25[3]	= {1668, 1765, 1653};

const float	dTempC[3]	= {0.00, 0.0, 0.0};	// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений

			float	AUcc[3]	= {3.216, 3.291, 3.287};		// (В)  напряжение АЦП МУК1, МУК2, МУК3
const float	Uref[3]	= {3.0169, 3.0197, 3.0214};		// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3 на PD0


// .............................................................................................................................
// *** М И Б *******************************************************************************************************************

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

const float kTempAE[3]	= {0.00010, 0.000100001, 0.00000001};	// Температурная коррекция АЭ

const float kTempAB[3]	= {0.00000001, 0.00000001, 0.00000001};		// Температурная коррекция АБ

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2					3				 4					5					6					7				 8				9					10		
const float	kAE_[2][72]	={{ 
					/* МУК1 */				2.468388,2.208917,2.439037,2.251352,2.417469,2.270045,2.396286,2.295450,2.389305,2.308367,
														2.382374,2.321431,2.375472,2.314882,2.375472,2.328018,2.375470,2.341312,2.368616,2.341306,
														2.375473,2.368349,2.361795,2.328021,2.361797,2.334640,2.355018,2.330984,2.368614,2.341306,
														2.368616,2.334641,2.355017,2.341306,2.355018,2.361525,2.361794,2.348008,2.348281,2.348005,
														2.334911,2.354742,2.341574,2.361522,2.348274,2.354746,2.334906,2.361526,2.341574,2.361522,
														2.348279,2.368338,2.341576,2.354745,2.348279,2.337623,2.348274,2.354746,2.348279,2.348004,
														2.341576,2.354746,2.334911,2.354742,2.348279,2.361522,2.341578,2.361521,2.348279,2.361522,
														2.348277,2.251377},

	// ...................................................................................................
					
					/* МУК2 */			 {2.459962,2.238726,2.467535,2.238725,2.459957,2.238728,2.444936,2.245006,2.444938,2.251317,
														2.430096,2.270464,2.408176,2.270464,2.415441,2.270463,2.400958,2.276920,2.386644,2.289943,
														2.393778,2.296511,2.393778,2.289941,2.386644,2.303113,2.379549,2.296508,2.393778,2.296511,
														2.386644,2.303111,2.379552,2.289944,2.386640,2.309754,2.379552,2.296511,2.372497,2.303111,
														2.365489,2.309760,2.379549,2.309759,2.372501,2.316439,2.379546,2.316439,2.372499,2.316442,
														2.358525,2.323164,2.358525,2.316439,2.358525,2.329914,2.358529,2.323160,2.358527,2.323155,
														2.358523,2.323160,2.358523,2.329917,2.351603,2.329917,2.351603,2.345235,2.351603,2.329917,
														2.358527,2.232456}};
//													 1		 2			3			 4			5			 6			7			 8			9			10
/* 													{ 
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
														}};
*/					
//														 1					 2					3					 4					5					6							7					 8					9						10
const float	dAE_[2][72]	={
													{0.006374,-0.009659,0.017092,-0.024168,0.026458,-0.040605,0.037727,-0.043837,0.037567,-0.052405,
													0.037594,-0.053605,0.039298,-0.057134,0.044049,-0.056538,0.041161,-0.072646,0.043036,-0.062454,
													0.037435,-0.084802,0.047586,-0.058364,0.041010,-0.060495,0.046569,-0.057858,0.040157,-0.067137,
													0.043036,-0.057656,0.043706,-0.067137,0.046569,-0.069605,0.044715,-0.070135,0.045557,-0.063596,
													0.048038,-0.067607,0.051898,-0.067752,0.048228,-0.071302,0.058202,-0.071457,0.047214,-0.072476,
													0.047399,-0.068919,0.045378,-0.069455,0.047399,-0.057149,0.048228,-0.071302,0.047399,-0.061755,
													0.045378,-0.071302,0.052708,-0.062898,0.042702,-0.072476,0.048225,-0.065900,0.042702,-0.072476,
													0.049241,-0.052421},

					/* МУК2 */			{0.006234,-0.014818,-0.005173,-0.018853,0.002286,-0.013021,0.003850,-0.016249,0.008256,-0.014991,
														0.007824,-0.027546,0.020934,-0.025276,0.017564,-0.029368,0.025736,-0.026307,0.025207,-0.034352,
														0.024747,-0.031278,0.022353,-0.036189,0.027594,-0.037883,0.024226,-0.037260,0.024747,-0.033122,
														0.025207,-0.042034,0.030424,-0.030225,0.021377,-0.043128,0.030424,-0.031278,0.025153,-0.042034,
														0.030339,-0.035259,0.024226,-0.039422,0.031333,-0.040054,0.022316,-0.044230,0.029430,-0.038196,
														0.032670,-0.041609,0.035029,-0.040054,0.032670,-0.052058,0.038813,-0.043013,0.034562,-0.050928,
														0.033136,-0.043013,0.030778,-0.048319,0.041577,-0.047859,0.035031,-0.058844,0.035031,-0.047859,
														0.034562,-0.044727}};
					// .................................................................................................
/*		  									{ 
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
												  0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
													}};
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.325, 4.325};						// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.363, 1.361},						// (В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};
float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений датчиков ТЕЧПЕРАТУРЫ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float	KuAB1[3]	= {64.395485, 64.335204, 64.312863};
const float	DuAB1[3]	= {-0.208351, -0.060639,  -0.219697};

const float	KuAB2[3]	= {64.395485, 64.335204, 64.312863};
const float	DuAB2[3]	= {-0.208351, -0.060639, -0.219697};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.04;															 
const float	MaxUdatchD = 3.18;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]				  =	{{1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
														  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
	 													  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784}};

float a1[3][nDatchD]				  = {{0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732}};

float a2[3][nDatchD]				  =	{{0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002}};
																 
// ------------------------------- Тарировочные данные
float ItarD[nDatchD]	= {0.002003,  0.0019898,  0.002002, 0.001993, 0.002002};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]		= {{0.055700,0.055810,0.055503,0.055333,0.055425},
																 {0.055727,0.055866,0.055578,0.055421,0.055346},
																 {0.055749,0.055899,0.055630,0.055348,0.055329}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]		= {{-0.008578,-0.008652,-0.009357,-0.009116,-0.009248},
																 {-0.008473,-0.008628,-0.009234,-0.008962,-0.008835},
																 {-0.008431,-0.008615,-0.009265,-0.008872,-0.008837}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},


// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.005;															 
const float	MaxUdatchT = 3.18;
	
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004149, 0.004149, 0.004149, 0.004149, 0.004149};			// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																																	
float ItarT[nDatchT]	= {0.0040124, 0.0040274, 0.0040072, 0.00402, 0.0040166};		// (A) Ток опроса датчиков ДТ в БЭ
																
const float	kDT[3][nDatchD]		= {{0.048648,0.048624,0.048519,0.048713,0.048471},	
																 {0.048696,0.048546,0.048665,0.048732,0.048587},
																 {0.048679,0.048666,0.048787,0.048737,0.048616}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]		= {{0.369089,0.369325,0.369134,0.369133,0.369034},	// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
																 {0.369545,0.369917,0.369366,0.369587,0.369493},
																 {0.370012,0.370303,0.369715,0.370069,0.370025}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]	= {0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9}};											// Коэфф динамической дельты датч темпертуры

const float	kLimUadc[3][nDatchD]	= {{0.0015, 0.00015, 0.0009, 0.0006, 0.0008},
																	 	 {0.0015, 0.00013, 0.0015, 0.0006, 0.0015},
																		 {0.0018, 0.0010, 0.0015, 0.0008, 0.0015}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadcT[3][nDatchD]	= {{0.000000, 0.000000, 0.000000, 0.000000, 0.000000},
	                                   {0.000000, 0.000000, 0.000000, 0.000000, 0.000000},                      // Коэфф динамической дельты датч темпертуры для 1 уставки 
																		 {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}};																			 

//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки


#endif
