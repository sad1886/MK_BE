/**********************************************************************
*																																			*
*		Файл параметров для АБ 72НВ-40 ЖЦПИ.563532.011 зав. № ________		*
*																																			*
***********************************************************************/

#ifndef PARAMETERS_A3001001_H
#define PARAMETERS_A3001001_H

//#define nMaxReadADC			3000			// Максимальное количество чтений АЦП для одного канала
//#define nWrkReadADC			1000			// Количество чтений АЦП для одного канала в штатом режиме
//#define nChanlADCd			2					// Число рабочих каналов АЦП. 2,3 - для датчиков; 4,5 - АЭ
//#define nDatch					10				// Число датчиков (5+5)

#define nDatchD					5					// Число датчиков давления
#define nDatchT					5					// Число датчиков температуры

//#define nMaxBadAE				5					// Число вышедших из строя АЭ, при котором АБ ещё "живёт"
//#define nMaxBadDatchD		2					// Число вышедших из строя ДД, при котором АБ ещё "живёт"
//#define nMaxBadDatchT		2					// Число вышедших из строя ДТ, при котором АБ ещё "живёт"

//#define lockPMaxDatchD	50				// Максимальное давление для ДД (для автономного управление)
//#define lockPMinDatchD	10				// Минимальное давление для ДД (для автономного управление)

//#define PMaxDatchD			65				// Максимальное давление для ДД (для автономного управление)
//#define PMinDatchD			0					// Минимальное давление для ДД (для автономного управление)

//#define TMaxDatchT			67				// Максимальная температура для ДТ
//#define TMinDatchT		 -18				// Минимальная температура для ДТ

//#define addd_dTm1				0.0002
//#define addd_dTm2				0.0004
//#define addd_dTm3				0.0004

//**************************************************************************************************
const int	kodADC_t25[3]	= {1681, 1829, 1783};

const float	dTempC[3]	= {2.00, 2.00, 2.0};	// (Грд Цельс) дельта датчика температуры МК

const float kdelta	= 0.05;											// Допустимый диапазон разброса ошибки 5% от диапазона измерений

			float	AUcc[3]	= {3.2304, 3.2449, 3.256};		// (В) Опорное напряжение АЦП МУК1, МУК2, МУК3
const float	Uref[3]	= {3.0221, 3.0192, 3.0199};		// (В) Прецизионное напряжение АЦП МУК1, МУК2, МУК3 на PD0


// .............................................................................................................................
// *** М И Б *******************************************************************************************************************

const int nCorrectAE 	 = 2;											// Числ пропусков ложного значения напряжений АЭ
const int koefZadergAE = 4;											// Коэфф задержки после коммутации дешифр АЭ (koefZadergAE*40000)

const float kTempAE[3]	= {0.00010, 0.000100001, 0.00000001};	// Температурная коррекция АЭ

const float kTempAB[3]	= {0.00000001, 0.00000001, 0.00000001};		// Температурная коррекция АБ

//float minUAE = 0.6;															// (В) Нижняя граница значения рабочего напряжения АЭ
//float maxUAE = 2.0;															// (В) Верхняя граница значения рабочего напряжения АЭ

//													 1					 2					3				 4					5					6					7				 8				9					10		
const float	kAE_[2][72]	={{ 
					/* МУК1 */				2.383701,2.321279,2.404771,2.314696,2.376759,2.334558,2.397707,2.314696,2.376759,2.324841,
														2.369858,2.347991,2.362997,2.347990,2.376759,2.347990,2.362997,2.354765,2.369858,2.347989,
														2.362997,2.354765,2.362997,2.368432,2.349393,2.375323,2.349393,2.354764,2.342649,2.382256,
														2.356175,2.368430,2.335945,2.368431,2.349393,2.375323,2.349393,2.382257,2.335945,2.382256,
														2.329278,2.389231,2.335945,2.382257,2.329278,2.396246,2.342649,2.389231,2.335945,2.389231,
														2.329278,2.396245,2.329278,2.389232,2.329278,2.382256,2.322649,2.403302,2.342650,2.382258,
														2.316058,2.396246,2.329278,2.389231,2.322649,2.403302,2.329278,2.389231,2.329278,2.403302,
														2.342650,2.263344},

	// ...................................................................................................
					
					/* МУК2 */			 {2.496075,2.281540,2.465732,2.237505,2.458266,2.231360,2.436123,2.262456,2.436127,2.245313,
														2.407216,2.281540,2.414383,2.287987,2.400094,2.294446,2.400097,2.300962,2.385981,2.307493,
														2.393019,2.307505,2.385981,2.300949,2.393021,2.314087,2.365117,2.307495,2.400097,2.307507,
														2.385977,2.327353,2.372034,2.300961,2.365117,2.327348,2.378987,2.307505,2.351410,2.327352,
														2.344619,2.327355,2.365118,2.334042,2.365118,2.327361,2.358241,2.340783,2.365120,2.320703,
														2.351407,2.347550,2.351414,2.327360,2.358244,2.334043,2.351412,2.340786,2.351410,2.340777,
														2.351412,2.327361,2.344614,2.340776,2.344618,2.334052,2.351409,2.340779,2.344618,2.340787,
														2.351409,2.225259}};
//													 1		 2			3			 4			5			 6			7			 8			9			10
/* 													{ 
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
													  1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0,
														1.0, 1.0,		1.0, 1.0,   1.0, 1.0,   1.0, 1.0,		1.0, 1.0,		1.0, 1.0
														}};
*/					
//														 1					 2					3					 4					5					6							7					 8					9						10
const float	dAE_[2][72]	={
													{0.056860,-0.069653,0.040248,-0.067517,0.059548,-0.079335,0.046787,-0.067517,0.055803,-0.065769,
													0.055759,-0.082585,0.059293,-0.079881,0.049322,-0.080735,0.061155,-0.081084,0.052025,-0.078884,
													0.061155,-0.081084,0.054711,-0.091835,0.060892,-0.088476,0.056337,-0.083795,0.065376,-0.093472,
													0.057383,-0.088102,0.066153,-0.085376,0.060038,-0.093082,0.060892,-0.089719,0.063464,-0.098091,
													0.065091,-0.090968,0.061624,-0.090585,0.066926,-0.096001,0.058988,-0.097483,0.064313,-0.090968,
													0.067915,-0.100646,0.063256,-0.092851,0.066080,-0.094338,0.071354,-0.099169,0.057142,-0.092462,
													0.072108,-0.097888,0.064245,-0.095601,0.071354,-0.099169,0.064245,-0.095601,0.066926,-0.099169,
													0.057142,-0.071024},

					/* МУК2 */			{-0.012841,-0.041445,-0.001283,-0.015298,0.000249,-0.020946,0.008570,-0.022810,0.007142,-0.015212,
														0.018189,-0.031269,0.013912,-0.046348,0.022936,-0.038808,0.021530,-0.050344,0.026673,-0.042772,
														0.024357,-0.051445,0.026673,-0.039872,0.022459,-0.056221,0.035009,-0.044603,0.021530,-0.055104,
														0.030457,-0.055265,0.030857,-0.048520,0.035009,-0.051573,0.029961,-0.051445,0.038622,-0.053420,
														0.039968,-0.056628,0.033134,-0.052690,0.035499,-0.062165,0.039626,-0.063094,0.033624,-0.057344,
														0.042351,-0.060527,0.037244,-0.060320,0.035886,-0.054540,0.039109,-0.064466,0.038622,-0.057525,
														0.039109,-0.062165,0.043201,-0.055669,0.041827,-0.061461,0.040486,-0.059382,0.041827,-0.066322,
														0.040486,-0.039836}};
					// .................................................................................................
/*		  									{ 
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
												  0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,
													0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0,		0.0, 0.0
													}};
*/				

// .............................................................................................................................

const float kUop[2]	=	{4.325, 4.325};						// Коэфф масштаб для измеренного опорного (аппаратного) напряжения

float cUsm[3][2] =  {{1.363, 1.361},						// (В) Измеренное напряжение средней точкой (смещение) для МУКов
									 	 {1.368, 1.369},
										 {0, 0}};
float Uop[2] = {1.981, 1.996};									// (В) Измеренное опорное напряжение

float t_Usm[2]	=	{1.364, 1.36};								// (В) Измеренное напряжение средней точкой (смещение) для отладки
float t_Uop[2]	=	{2.006, 1.992};

float TUsm[2];																	// (В) Измеренное напряжение средней точкой (смещение) для отладки
float TUop[2];																	// (В) Измеренное опорное напряжение для отладки
//
volatile float NumIzmAE[nDatchD]	= {6, 7, 16, 59, 66};	// 7, 8, 17, 60, 67 - Номера измерительных АЭ (ДД, ДТ) 


// .............................................................................................................................
// *** П С Д *******************************************************************************************************************

const int nCorrectDD = 1;												// Числ пропусков ложного значения напряжений датчиков ДАВЛЕНИЯ
const int nCorrectDT = 1;												// Числ пропусков ложного значения напряжений датчиков ТЕМПЕРАТУРЫ
const int nCorrectDAB = 1;											// Числ пропусков ложного значения напряжений АБ

const int koefZadergDat = 2;										// Коэфф задержки после коммутации дешифр датчиков (koefZadergDat*40000)

const float	KuGndP[3]	= {1.0, 1.0, 1.0};
const float	KuGndT[3]	= {1.0, 1.0, 1.0};
const float	KuOpornP[3]	= {1.0, 1.0, 1.0};
const float	KuOpornT[3]	= {1.0, 1.0, 1.0};

// ******************************** Напряжение АБ: ********************************
const float	KuAB1[3]	= {64.506968, 64.506968, 64.25182};
const float	DuAB1[3]	= {-0.361251, -0.361251, 0.009307};

const float	KuAB2[3]	= {64.694462, 64.694462, 64.25182};
const float	DuAB2[3]	= {-0.446908, -0.606908, -0.019952};

// ******************************** Датчики давления: ********************************
const float	MinUdatchD = 0.04;															 
const float	MaxUdatchD = 3.18;
	
// ------------------------------- Паспортные данные
float a0[3][nDatchD]				  =	{{1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
														  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784},
	 													  	 {1.1784,	1.1784, 1.1784, 1.1784, 1.1784}};

float a1[3][nDatchD]				  = {{0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732},
	 													  	 {0.4732, 0.4732, 0.4732, 0.4732, 0.4732}};

float a2[3][nDatchD]				  =	{{0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002},
	 													  	 {0.0002, 0.0002, 0.0002, 0.0002, 0.0002}};
																 
// ------------------------------- Тарировочные данные
float ItarD[nDatchD]	= {0.0019889,  0.0019947,  0.001997, 0.0019951, 0.0019985};		// (A) Ток опроса датчиков ДД в БЭ

const float	kDD[3][nDatchD]		= {{0.055845,0.055902,0.055702 ,0.055326,0.055432},  
																 {0.055951,0.055945,0.055540,0.055347,0.055493},
																 {0.055959,0.055912,0.055558,0.055385,0.055547}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDD[3][nDatchD]		= {{-0.009615,-0.008975,-0.009774,-0.008974,-0.009677},
																 {-0.009729,-0.009106,-0.009594,-0.009081,-0.009857},
																 {-0.009671,-0.009036,-0.009518,-0.009139,-0.009910}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},


// ******************************** Датчики температуры: ********************************
const float	MinUdatchT = 0.003;															 
const float	MaxUdatchT = 3.18;
	
// ------------------------------- Паспортные данные
float R0[nDatchT]			= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 0°C (по паспорту);
//float R100[nDatchT]		= {99.94, 99.94, 99.94, 99.94, 99.94};										// (ом) Сопротивление датчика при t = 100°C (по паспорту);
												 
float alpha[nDatchT]	= {0.004149, 0.004149, 0.004149, 0.004149, 0.004149};			// Температурный коэффициент по паспорту.

// ------------------------------- Тарировочные данные																																	
float ItarT[nDatchT]	= {0.003998, 0.003999, 0.003999, 0.004016, 0.004001};		// (A) Ток опроса датчиков ДТ в БЭ
																
const float	kDT[3][nDatchD]		= {{0.048699,0.048616,0.048516,0.048664,0.048667},	
																 {0.048674,0.048569,0.048402,0.048636,0.048596},
																 {0.048617,0.048608,0.048580,0.048710,0.048774}};
//																 {1.0, 1.0, 1.0, 1.0, 1.0},

const float	dDT[3][nDatchD]		= {{0.369627,0.369882,0.370058,0.369870,0.369353},	// 0.371696 dДт1 2-4 точка, 0.370504 2-5 точка
																 {0.368868,0.369189,0.369258,0.369220,0.368682},
																 {0.369674,0.369802,0.369828,0.369687,0.369020}};								 
//																 {0.0, 0.0, 0.0, 0.0, 0.0},

const float	kTemp[3][5]	= {0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001,
													 0.00000001, 0.00000001, 0.00000001, 0.00000001, 0.00000001};

//const float	dKT[3][nDatchD]	= {{ 0.01,   0.01,  0.010,  0.01,  0.01},
//															 {-0.018, -0.02, -0.018, -0.019, -0.02},
//															 { 0.0245, 0.024, 0.0245, 0.025,  0.024}};						// Коэфф динамической дельты датч темпертуры

//========== коррекция первой уставки ====================================================================
const float	LimUadc[3][nDatchD]	= {{ 0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9},
																		{0.9, 0.9, 0.9, 0.9, 0.9}};											// напряжение начала корректировки 1 уставки темпертуры

const float	kLimUadc[3][nDatchD]	= {{0.0027, 0.0020, 0.0025, 0.0013, 0.0015},
																	 	 {0.0020, 0.0013, 0.0020, 0.0007, 0.0013},
																		 {0.0023, 0.0015, 0.0020, 0.0010, 0.0015}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadcT[3][nDatchD]	= {{0.000000, 0.000000, 0.000000, 0.000000, 0.000000},
	                                   {0.000000, 0.000000, 0.000000, 0.000000, 0.000000},                      // Коэфф динамической дельты датч темпертуры для 1 уставки 
																		 {0.000001, 0.000000, 0.000000, 0.000000, 0.000000}};																			 

//========== коррекция пятой уставки ====================================================================
const float	LimUadc_5[3][nDatchD]	= {{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0},
																			{0.0, 0.0, 0.0, 0.0, 0.0}};

const float	kLimUadc_5[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэфф динамической дельты датч темпертуры

const float	kLimUadc_5_T[3][nDatchD]	= {{0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0},
																			{ 0.0, 0.0, 0.0, 0.0, 0.0}};						// Коэф динамической дельты датч темпертуры для 5 уставки


#endif
